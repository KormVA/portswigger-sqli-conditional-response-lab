# Union-based SQL Injection: –û–±—Ö–æ–¥ —Ñ–∏–ª—å—Ç—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤

## üìå –û–ø–∏—Å–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–ª–æ SQL-–∏–Ω—ä–µ–∫—Ü–∏—é –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `category` —Ñ–∏–ª—å—Ç—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–≤–æ–ª—è–ª–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å SQL-–∑–∞–ø—Ä–æ—Å –∏ –æ–±—Ö–æ–¥–∏—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (`released = 1`).

## üéØ –¶–µ–ª—å –∞—Ç–∞–∫–∏
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤, –≤–∫–ª—é—á–∞—è —Ç–µ, —á—Ç–æ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ "–Ω–µ –≤—ã–ø—É—â–µ–Ω–Ω—ã–µ" (`released = 0`).

## üîß –®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
1.  –ü–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –∑–∞–ø—Ä–æ—Å `GET /filter?category=Gifts` –≤ Burp Suite.
2.  –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞ `category='+OR+1=1--`.
3.  –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å. –í –æ—Ç–≤–µ—Ç–µ –ø–æ—è–≤—è—Ç—Å—è –Ω–µ–≤—ã–ø—É—â–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã.

## üí° –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã
–ò—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å: `SELECT * FROM products WHERE category = 'Gifts' AND released = 1`
–ü–æ—Å–ª–µ –∏–Ω—ä–µ–∫—Ü–∏–∏: `SELECT * FROM products WHERE category = '' OR 1=1--' AND released = 1`
–£—Å–ª–æ–≤–∏–µ `1=1` –≤—Å–µ–≥–¥–∞ –∏—Å—Ç–∏–Ω–Ω–æ, –∞ `--` –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–≤—à—É—é—Å—è —á–∞—Å—Ç—å —Å—Ç—Ä–æ–∫–∏, —É–¥–∞–ª—è—è —Ñ–∏–ª—å—Ç—Ä `AND released = 1`.

## üõ°Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é
*   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** (Prepared Statements).
*   –í–Ω–µ–¥—Ä–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é **–≤–∞–ª–∏–¥–∞—Ü–∏—é** –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–±–µ–ª—ã–µ —Å–ø–∏—Å–∫–∏).
*   –ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π** –¥–ª—è —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ë–î.
